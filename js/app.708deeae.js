(function(e){function t(t){for(var s,r,a=t[0],l=t[1],c=t[2],v=0,h=[];v<a.length;v++)r=a[v],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(h.length)h.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],s=!0,a=1;a<i.length;a++){var l=i[a];0!==n[l]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},n={app:0},o=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/Boids/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var s=i("85ec"),n=i.n(s);n.a},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("Boids")],1)},o=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"box"},[i("div",[i("canvas",{ref:"main_canvas",attrs:{width:"1920",height:"1080",id:"main_canvas"}})]),i("p",{staticClass:"right"},[e._v(" "+e._s((e.fps_hist.reduce((function(e,t){return e+t}))/e.fps_hist.length).toFixed(0))+" FPS ")]),i("div",{staticClass:"container"},[i("label",{attrs:{for:"num_boids"}},[e._v("Number of Boids")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.num_boids,expression:"num_boids"}],staticClass:"slider",attrs:{id:"num_boids",type:"range",min:"1",max:"500",step:"1"},domProps:{value:e.num_boids},on:{__r:function(t){e.num_boids=t.target.value}}}),i("p",[e._v(e._s(e.num_boids))]),i("label",{attrs:{for:"speed"}},[e._v("Boid Speed")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],staticClass:"slider",attrs:{id:"speed",type:"range",min:"0",max:"2",step:".01"},domProps:{value:e.speed},on:{__r:function(t){e.speed=t.target.value}}}),i("p",[e._v(e._s(e.speed))]),i("label",{attrs:{for:"size"}},[e._v("Boid Size")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.boid_size,expression:"boid_size"}],staticClass:"slider",attrs:{id:"size",type:"range",min:"1",max:"50",step:"1"},domProps:{value:e.boid_size},on:{__r:function(t){e.boid_size=t.target.value}}}),i("p",[e._v(e._s(e.boid_size))]),i("div",{staticClass:"bar"}),i("div",{staticClass:"bar"}),i("div",{staticClass:"bar"}),i("label",{attrs:{for:"field_of_view_deg"}},[e._v("Field of View")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.field_of_view_deg,expression:"field_of_view_deg"}],staticClass:"slider",attrs:{id:"field_of_view_deg",type:"range",min:"1",max:"180",step:"1"},domProps:{value:e.field_of_view_deg},on:{__r:function(t){e.field_of_view_deg=t.target.value}}}),i("p",[e._v(e._s(e.field_of_view_deg)+"Â°")]),i("label",{attrs:{for:"vision_dist"}},[e._v("Vision Distance")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.vision_dist,expression:"vision_dist"}],staticClass:"slider",attrs:{id:"vision_dist",type:"range",min:"0",max:"500",step:"1"},domProps:{value:e.vision_dist},on:{__r:function(t){e.vision_dist=t.target.value}}}),i("p",[e._v(e._s(e.vision_dist))]),i("label",{attrs:{for:"collision_dist"}},[e._v("Collision Avoidance Distance")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.collision_dist,expression:"collision_dist"}],staticClass:"slider",attrs:{id:"collision_dist",type:"range",min:"1",max:"200",step:"1"},domProps:{value:e.collision_dist},on:{__r:function(t){e.collision_dist=t.target.value}}}),i("p",[e._v(e._s(e.collision_dist))]),i("label",{attrs:{for:"draw_debug"}},[e._v("Draw Vision Lines")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.draw_debug,expression:"draw_debug"}],attrs:{id:"draw_debug",type:"checkbox"},domProps:{checked:Array.isArray(e.draw_debug)?e._i(e.draw_debug,null)>-1:e.draw_debug},on:{change:function(t){var i=e.draw_debug,s=t.target,n=!!s.checked;if(Array.isArray(i)){var o=null,r=e._i(i,o);s.checked?r<0&&(e.draw_debug=i.concat([o])):r>-1&&(e.draw_debug=i.slice(0,r).concat(i.slice(r+1)))}else e.draw_debug=n}}}),i("p"),i("div",{staticClass:"bar"}),i("div",{staticClass:"bar"}),i("div",{staticClass:"bar"}),i("label",{attrs:{for:"collision_avoidance_strength"}},[e._v("Collision Avoidance Strength")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.collision_avoidance_strength,expression:"collision_avoidance_strength"}],staticClass:"slider",attrs:{id:"collision_avoidance_strength",type:"range",min:"0",max:".02",step:".001"},domProps:{value:e.collision_avoidance_strength},on:{__r:function(t){e.collision_avoidance_strength=t.target.value}}}),i("p",[e._v(e._s(e.collision_avoidance_strength))]),i("label",{attrs:{for:"velocity_align_strength"}},[e._v("Velocity Alignment Strength")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.velocity_align_strength,expression:"velocity_align_strength"}],staticClass:"slider",attrs:{id:"velocity_align_strength",type:"range",min:"0",max:".02",step:".001"},domProps:{value:e.velocity_align_strength},on:{__r:function(t){e.velocity_align_strength=t.target.value}}}),i("p",[e._v(e._s(e.velocity_align_strength))]),i("label",{attrs:{for:"center_of_mass_align_strength"}},[e._v(" Center of Mass Alignment Strength")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.center_of_mass_align_strength,expression:"center_of_mass_align_strength"}],staticClass:"slider",attrs:{id:"center_of_mass_align_strength",type:"range",min:"0",max:".02",step:".001"},domProps:{value:e.center_of_mass_align_strength},on:{__r:function(t){e.center_of_mass_align_strength=t.target.value}}}),i("p",[e._v(e._s(e.center_of_mass_align_strength))])]),i("div",{staticClass:"bar m1em"}),e._m(0)])])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"left"},[i("a",{attrs:{href:"https://en.wikipedia.org/wiki/Boids"}},[e._v("Boids")]),e._v(' are an artificial life program, developed by Craig Reynolds, which simulates the flocking behaviour of birds. The name "boid" corresponds to a shortened version of "bird-oid object", which refers to a bird-like object. Boids are an example of emergent behavior; that is, the complexity of Boids arises from the interaction of individual agents (the boids, in this case) adhering to a set of simple rules. The rules applied in the simplest Boids world are as follows: ')]),i("ul",[i("li",[e._v(" separation: steer to avoid crowding local flockmates ")]),i("li",[e._v(" alignment: steer towards the average heading of local flockmates ")]),i("li",[e._v(" cohesion: steer to move towards the average position (center of mass) of local flockmates ")])]),i("p",{staticClass:"left"},[e._v(" The blue ring shows how close a flock mate has to get before collision avoidance begins. ")]),i("p",{staticClass:"left"},[e._v(" The green region shows the field of view combined with the vision distance. Any flock member inside this reigon will be used for velocity alignment and center of mass alignment calculations. Red lines are also drawn to these flock members. ")]),i("p",{staticClass:"left"},[e._v("The red dot is the center of mass.")])])}],l=(i("cb29"),i("a434"),i("b85c"));function c(e){for(var t=[],i=2*Math.PI/e,s=0;s<e;++s)t.push({x:.1*Math.cos(s*i),y:.1*Math.sin(s*i)});return{center:{x:0,y:0},verts:t}}function d(e,t){return{x:e.x+t.x,y:e.y+t.y}}function v(e,t){var i={verts:[]};i.center=d(e.center,t);for(var s=0;s<e.verts.length;++s)i.verts[s]=d(e.verts[s],t);return i}function h(e,t){var i;i=0===e.center.x&&0===e.center.y?JSON.parse(JSON.stringify(e)):v(e,{x:-e.center.x,y:-e.center.y});for(var s=0;s<i.verts.length;++s)i.verts[s].x*=t.x,i.verts[s].y*=t.y;return 0===e.center.x&&0===e.center.y?i:v(i,{x:e.center.x,y:e.center.y})}function _(e,t){var i;i=0===e.center.x&&0===e.center.y?JSON.parse(JSON.stringify(e)):v(e,{x:-e.center.x,y:-e.center.y});for(var s=Math.sin(t),n=Math.cos(t),o=0;o<i.verts.length;++o){var r=i.verts[o].x*n-i.verts[o].y*s,a=i.verts[o].x*s+i.verts[o].y*n;i.verts[o].x=r,i.verts[o].y=a}return 0===e.center.x&&0===e.center.y?i:v(i,{x:e.center.x,y:e.center.y})}var u={makeRegularPrimitive:c,translatePoint:d,translatePrimitive:v,scalePrimitive:h,rotatePrimitive:_};i("a9e3"),i("9129");function f(e,t){return Math.random()*(t-e)+e}function p(){var e=f(-1,1),t=f(-1,1),i=Math.sqrt(e*e+t*t);return{x:e/i,y:t/i}}function g(e,t){var i=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.acos((e.x*t.x+e.y*t.y)/(i*s));return Number.isNaN(n)?0:n}function m(e,t){return e.x*t.y-e.y*t.x}function x(e,t){var i=Math.sin(t),s=Math.cos(t);return{x:e.x*s-e.y*i,y:e.x*i+e.y*s}}function y(e,t,i){for(var s=[],n=(t-e)/(i-1),o=0;o<i;o++)s.push(e+n*o);return s}var b={random_vector:p,angle_between:g,cross_product:m,rotate_vector:x,linear_spaced_array:y},w={name:"Boids",data:function(){return{draw_debug:!0,id:0,fps_hist:[0,0,0,0,0,0,0,0,0,0],prevTime:performance.now(),canvas:null,context:null,triangle:{center:{x:0,y:0},verts:[{x:1,y:0},{x:-.866,y:.5},{x:-.866,y:-.5}]},boids:[],boid_size:10,speed:.45,num_boids:100,vision_dist:100,field_of_view_deg:120,collision_dist:50,collision_avoidance_strength:.005,velocity_align_strength:.01,center_of_mass_align_strength:.001}},computed:{field_of_view:function(){return this.field_of_view_deg*Math.PI/180}},methods:{clear:function(){this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.fillStyle="#cde2e2",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()},fillCircle:function(e,t,i){this.context.beginPath(),this.context.arc(e.x,e.y,t,0,2*Math.PI),this.context.fillStyle=i,this.context.fill()},drawCircle:function(e,t,i){this.context.beginPath(),this.context.arc(e.x,e.y,t,0,2*Math.PI),this.context.lineWidth=4,this.context.strokeStyle=i,this.context.stroke()},drawFOV:function(e,t,i,s,n){var o=Math.atan(i.y/i.x)-(i.x<0?Math.PI:0);this.context.beginPath(),this.context.moveTo(e.x+i.x*t,e.y+i.y*t),this.context.arc(e.x,e.y,t,o,o+s,!1),this.context.lineTo(e.x,e.y),this.context.moveTo(e.x+i.x*t,e.y+i.y*t),this.context.arc(e.x,e.y,t,o,o-s,!0),this.context.lineTo(e.x,e.y),this.context.lineWidth=4,this.context.strokeStyle=n,this.context.stroke()},drawLine:function(e,t){this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.strokeStyle="#ff0000",this.context.lineWidth=2,this.context.stroke()},drawPrimative:function(e,t){var i=e.verts;this.context.beginPath(),this.context.moveTo(i[0].x,i[0].y);for(var s=1;s<i.length;++s)this.context.lineTo(i[s].x,i[s].y);this.context.fillStyle=t,this.context.fill()},update:function(e){this.fps_hist.shift(),this.fps_hist.push(1/e*1e3);var t,i=Object(l["a"])(this.boids);try{for(i.s();!(t=i.n()).done;){var s=t.value,n=[];s.debug&&(s.seen=[]);var o,r=Object(l["a"])(this.boids);try{for(r.s();!(o=r.n()).done;){var a=o.value;if(s.id!=a.id){var c=s.pos.x-a.pos.x,d=s.pos.y-a.pos.y,v=Math.sqrt(c*c+d*d);if(!(v>this.vision_dist)){var h={x:a.pos.x-s.pos.x,y:a.pos.y-s.pos.y},_=b.angle_between(h,s.vel);_>this.field_of_view||(s.debug&&s.seen.push(a.pos),n.push({other:a,other_v:h,th:_,d:v}))}}}}catch(T){r.e(T)}finally{r.f()}for(var u=0,f=n;u<f.length;u++){var p=f[u],g=p.other_v,m=p.th,x=p.d;x>this.collision_dist||(b.cross_product(g,s.vel)<0?s.vel=b.rotate_vector(s.vel,-m*e*this.collision_avoidance_strength):s.vel=b.rotate_vector(s.vel,m*e*this.collision_avoidance_strength))}var y={x:0,y:0};if(n.length>0){var w,P={x:0,y:0},C=Object(l["a"])(n);try{for(C.s();!(w=C.n()).done;){var M=w.value.other;P.x+=M.vel.x,P.y+=M.vel.y,y.x+=M.pos.x,y.y+=M.pos.y}}catch(T){C.e(T)}finally{C.f()}P.x/=n.length,P.y/=n.length,y.x/=n.length,y.y/=n.length;var k=b.angle_between(P,s.vel);b.cross_product(P,s.vel)>0?s.vel=b.rotate_vector(s.vel,-k*e*this.velocity_align_strength):s.vel=b.rotate_vector(s.vel,k*e*this.velocity_align_strength)}if(s.debug&&(s.com=y),n.length>0){var O={x:y.x-s.pos.x,y:y.y-s.pos.y},S=b.angle_between(O,s.vel);b.cross_product(O,s.vel)>0?s.vel=b.rotate_vector(s.vel,-S*e*this.center_of_mass_align_strength):s.vel=b.rotate_vector(s.vel,S*e*this.center_of_mass_align_strength)}s.pos={x:s.pos.x+s.vel.x*e*this.speed,y:s.pos.y+s.vel.y*e*this.speed},s.pos.x>this.canvas.width&&(s.pos={x:0,y:s.pos.y}),s.pos.x<0&&(s.pos={x:this.canvas.width,y:s.pos.y}),s.pos.y>this.canvas.height&&(s.pos={x:s.pos.x,y:0}),s.pos.y<0&&(s.pos={x:s.pos.x,y:this.canvas.height})}}catch(T){i.e(T)}finally{i.f()}},render:function(){this.clear();var e,t=Object(l["a"])(this.boids);try{for(t.s();!(e=t.n()).done;){var i=e.value,s=Math.atan(i.vel.y/i.vel.x)-(i.vel.x<0?Math.PI:0);this.drawPrimative(u.translatePrimitive(u.rotatePrimitive(u.scalePrimitive(this.triangle,{x:this.boid_size,y:this.boid_size}),s),i.pos),i.color)}}catch(h){t.e(h)}finally{t.f()}if(this.boids[0].debug&&this.draw_debug){var n=this.boids[0];this.drawCircle(n.pos,this.collision_dist,"#0000ff"),n.seen.length>0&&this.fillCircle(n.com,7,"#ff0000"),n.seen.length>0&&this.drawCircle(n.com,7,"#000"),this.drawFOV(n.pos,this.vision_dist,n.vel,this.field_of_view,"#1f823f");var o,r=Object(l["a"])(n.seen);try{for(r.s();!(o=r.n()).done;){var a=o.value,c=a.x-n.pos.x,d=a.y-n.pos.y,v=Math.sqrt(c*c+d*d);v<this.vision_dist&&this.drawLine(a,n.pos)}}catch(h){r.e(h)}finally{r.f()}}},loop:function(e){var t=e-this.prevTime;if(this.prevTime=e,this.update(t),this.render(),this.boids.length<this.num_boids)for(var i=this.num_boids-this.boids.length,s=b.linear_spaced_array(100,255,i),n=0;n<i;++n)this.boids.push({pos:{x:100,y:100},vel:b.random_vector(),debug:!1,color:"rgb(0,0,".concat(s[n],")"),id:this.id++});this.boids.length>this.num_boids&&this.boids.splice(this.num_boids),requestAnimationFrame(this.loop)}},created:function(){for(var e=b.linear_spaced_array(100,255,this.num_boids),t=0;t<this.num_boids;++t)this.boids.push({pos:{x:100,y:100},vel:b.random_vector(),debug:!1,color:"rgb(0,0,".concat(e[t],")"),id:this.id++});this.boids[0].debug=!0},mounted:function(){this.canvas=this.$refs.main_canvas,this.context=this.$refs.main_canvas.getContext("2d",{alpha:!1}),requestAnimationFrame(this.loop)}},P=w,C=(i("de77"),i("2877")),M=Object(C["a"])(P,r,a,!1,null,"007e1812",null),k=M.exports,O={name:"App",components:{Boids:k}},S=O,T=(i("034f"),Object(C["a"])(S,n,o,!1,null,null,null)),j=T.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(e){return e(j)}}).$mount("#app")},"85ec":function(e,t,i){},beac:function(e,t,i){},de77:function(e,t,i){"use strict";var s=i("beac"),n=i.n(s);n.a}});
//# sourceMappingURL=app.708deeae.js.map